---
title: About this Blog 
date: 2012-09-02 14:02 -04:00
tags:
---

I'm relaunching the *Perplexinomicon* here, at my main site. This blog--and site--is being put together using the [Middleman](http://middlemanapp.com/) framework. I'm a little unsure about this, because Middleman requires [Sinatra](http://www.sinatrarb.com/) and [Padrino](http://www.padrinorb.com/), and since you can build an entire web app using Padrino, I'm wondering if Middleman isn't overkill for static sites. But that's what it is advertised for.

I'm using Middleman because I want to move my blog and website hosting from HostGator to Heroku, partly because Heroku is free at my bandwidth and storage requirements and partly because Heroku is something I want to start working with more. I have applications I want to write, and Heroku is a cloudy place where I can store these things. So gettting the static website up is a first step. At some point, I'll probably add some JavaScript to this page, since it currently is pretty much exclusively patched together with a combination of Haml and Sass.

The first step was to get middleman set up at all. Typically, when I start a project like this, I'll create a gemset using rvm and then use bundler from there. That's what I did here, too, just following the instructions on the middleman [getting started](http://middlemanapp.com/getting-started/welcome/) page and then converting a few files. I wanted to have my resume/cv page be the initial landing spot and to use a combination of Haml and Sass as my templating languages.

The layout.erb file because layout.haml, which contained nothing more than the statement `= yield`.

So the next challenge was to get my resume written in Haml and Sass, then put onto Heroku. This was fairly trivial. There were a few growing pains, but overall, it was just a matter of translating this:

    :::html
    <div class="column1">
      <div class="nameplate">
        <div class="workblock">
          <div class="when">
            <p>John P. Daigle</p>
          </div>
          <div class="where">
            <p></p>
            <ul> 
              <li>Coding</li>
              <li>Automation</li>
              <li>Design</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

Into this:

    :::haml
    .column1
      .nameplate
        .workblock
          .when
            %p John P. Daigle
          .where
            %ul
              %li Coding
              %li Automation
              %li Design

And this:

    :::css
    div.column1{
      width:726px;
      position:relative;
      float:left;
      background:url(graphics/fire.png) no-repeat top left #ffffff;
      padding:0px;
      border-right:solid #000000 10px;
    }

Into this:

    :::sass
    div.column1
      width: 726px
      position: relative
      float: left
      background: url(../images/fire.png) no-repeat top left #ffffff
      background-position: 0px -100px
      padding: 0px
      border-right: solid #000000 10px

Once that was done, I wanted to add the blogging function. That wasn't difficult either, I just added the `middleman-blog` gem and made a few changes to the config.rb file. After that it was a matter of fixing up the layout function and main blog splash page.  

The real challenge was getting pygments set up. There are [instructions for using pygments](http://middlemanapp.com/advanced/rack-middleware/) on the Middleman site, but there are a few pitfalls you might want to be aware of if you want to use pygments with Heroku.

The main thing is that the whole system seems to be fairly dependent on using the right versions of everything. The combination of gems and versions that worked for me was to use default versions of middleman and middleman blog, but to specify builder 3.0.0 and rubypython 0.5.1. For whatever reason, later versions of rubypython crash the app on heroku, and later versions of builder produce a warning `undefining 'object_id' may cause serious problems`. I didn't want serious problems, so I used an earlier version of builder.

There are a lot of instructions on the internet for setting up your config.ru file. Many of them include ways to specify the environment you are working in. This is excellent practice, but my entire config.ru file is:

    :::ruby
    require 'rubygems'
    require 'middleman/rack'
    require 'rack/codehighlighter'
    require 'pygments'
    require 'rubypython'
    
    use ::Rack::Codehighlighter, 
      :pygments,
      :element => "pre>code",
      :pattern => /\A:::([-_+\w]+)\s*\n/,
      :markdown => true,
      :options => {:noclasses => true, :style => "colorful"}

      run Middleman.server
      RubyPython.start(:python_exe => "python2.6")

The python version is crucial, The app crashes without it. So with all of that together, this is a middleman app hosted on Heroku.  
